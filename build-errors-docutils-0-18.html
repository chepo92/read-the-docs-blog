
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta content="Recent changes in the underlying dependencies of Sphinx have caused errors in certain old projects. In this post we describe why this is happening, and give two possible solutions." lang="en" name="description" />

  <meta property="og:title" content="Build errors with docutils 0.18" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="build-errors-docutils-0-18.html" />
  <meta property="og:site_name" content="Read the Docs Blog" />
  <meta property="og:description" content="Starting about a week ago, some users started reporting new errors with their project builds. In most cases, these errors appeared out of nowhere and are usually rather cryptic errors referencing S..." />
  <meta property="og:image" content="https://blog.readthedocs.com/_static/logo-opengraph.png" />
  <meta property="og:image:alt" content="Read the Docs Blog" />
  <meta name="twitter:card" content="summary_large_image" />
    <title>Build errors with docutils 0.18 &#8212; BioCurious DIY BioPrinting Blog</title>
    <link rel="stylesheet" href="_static/main.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  
  <link href='//fonts.googleapis.com/css?family=Bree+Serif' rel='stylesheet' type='text/css' />
  <link href='//fonts.googleapis.com/css?family=Puritan:400,400italic,700,700italic' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" href="_static/local.css" type="text/css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer data-domain="blog.readthedocs.com" src="https://plausible.io/js/plausible.js"></script>

  
  <link rel="alternate" type="application/atom+xml"  href="archive/atom.xml" title="Read the Docs Blog">
  
  
  <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
  <!-- BEGIN header -->
  <div id="header">
    <div class="row">
      <div class="logo">
        <h1><a href="index.html">
            <img src="_static/logo.png" height="48" />
            Read the Docs Blog
        </a></h1>
      </div>
      <div class="nav">
        <ul>
          <li><a href="https://readthedocs.com">Back to site</a></li>
          <li><a href="mailto:hello@readthedocs.com">Contact&nbsp;Us</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- END header -->

  <div id="content">
    <div class="wrapper">

      <div class="col-major content">
          
  <div class="section" id="build-errors-with-docutils-0-18">
<h1>Build errors with docutils 0.18<a class="headerlink" href="#build-errors-with-docutils-0-18" title="Permalink to this headline">¶</a></h1>
<p>Starting about a week ago, some users started reporting new errors with
their project builds. In most cases, these errors appeared out of nowhere and
are usually rather cryptic errors referencing <a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a> and <a class="reference external" href="https://pypi.org/project/docutils/">docutils</a>.</p>
<p>So, what is happening?</p>
<p>These errors are due to an incompatibility bewteen old versions of <a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a> and
one of its dependencies, <a class="reference external" href="https://pypi.org/project/docutils/">docutils</a>. You probably have not directly interacted
with docutils, but this is the library that provides reStructuredText parsing to
both Sphinx and to the Python standard library documentation tooling.</p>
<p>There are a number of errors that users have reported due to this
incompatibility, but the most common error is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;generator&#39;</span> <span class="nb">object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">subscriptable</span>
</pre></div>
</div>
<p>If your project’s builds suddenly start failing with the above error message, or
other cryptic errors that don’t seem related to your project, your project is
most likely encountering this bug.</p>
<div class="section" id="why-is-this-happening">
<h2>Why is this happening?<a class="headerlink" href="#why-is-this-happening" title="Permalink to this headline">¶</a></h2>
<p>The underlying cause for this error is using an outdated version of <a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a>
(version &lt; 3.0) with the latest release of <a class="reference external" href="https://pypi.org/project/docutils/">docutils</a> (version 0.18,
released October 26). This latest release of docutils is no longer comptible
with Sphinx versions 1.x and 2.x, however these versions do not specify a upper
limit to the version of docutils installed, and so will install the latest
release by default.</p>
<p>The reason so many projects use an old version of Sphinx
is that, <a class="reference external" href="https://docs.readthedocs.io/en/stable/builds.html#external-dependencies" title="(in Read the Docs user documentation v6.3.2)"><span class="xref std std-ref">before October 2020, Read the Docs had a more strict pinning
policy</span></a>
and Sphinx 1.8 was the default version.
New projects are not affected.</p>
</div>
<div class="section" id="fixing-the-error">
<h2>Fixing the error<a class="headerlink" href="#fixing-the-error" title="Permalink to this headline">¶</a></h2>
<p>We have proposed to the <a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a> and <a class="reference external" href="https://pypi.org/project/docutils/">docutils</a> maintainers
<a class="reference external" href="https://github.com/sphinx-doc/sphinx/issues/9807">a solution that doesn’t involve manual intervention</a>.
However, for now we suggest you manually
resolve this issue for any of your projects that have encountered the bug.</p>
<p>There are two ways to resolve this issue:</p>
<dl class="docutils">
<dt>Upgrade <a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a> to version 3 or later</dt><dd><p>We recommend this option for most users. If your project doesn’t
specifically still require Sphinx 1.x or 2.x, your project can most likely
be upgraded, without issues, to a modern version of Sphinx. As a bonus,
you’ll be able to use the latest Sphinx releases and extensions that only
support modern Sphinx releases.</p>
<p>It is worth noting that one reason why you might still be using an old
version of Sphinx is if you generate API documentation for Python 2
compatible code. In this case, you’ll have more work ahead of you in order
to upgrade, as Sphinx version 3 and 4 only support Python 3.</p>
</dd>
<dt>Downgrade <a class="reference external" href="https://pypi.org/project/docutils/">docutils</a></dt><dd>This is the next best option if you can’t immediately upgrade Sphinx. If you
are familiar with Python packaging, the best specifier to use is
<code class="docutils literal notranslate"><span class="pre">docutils&lt;0.18</span></code>.</dd>
</dl>
</div>
<div class="section" id="fixing-the-error-on-read-the-docs">
<h2>Fixing the error on Read the Docs<a class="headerlink" href="#fixing-the-error-on-read-the-docs" title="Permalink to this headline">¶</a></h2>
<p>If you aren’t already, you should add a <a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/v2.html" title="(in Read the Docs user documentation v6.3.2)"><span class="xref std std-doc">configuration file</span></a>
for your project, so that you can specify additional dependencies to install at
build time. There are a few supported methods for installation, depending on how
you normally install dependencies for your project. If you are not currently
specifying any dependencies on Read the Docs, you most likely will want to use
the <a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/v2.html#requirements-file" title="(in Read the Docs user documentation v6.3.2)"><span class="xref std std-ref">python.install.requirements</span></a> configuration option.</p>
<p>This is how the reference <code class="docutils literal notranslate"><span class="pre">.readthedocs.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">docs/requirements.txt</span></code> files
would look like:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">.readthedocs.yaml</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>

<span class="nt">python</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">install</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">requirements</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docs/requirements.txt</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">docs/requirements.txt</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span><span class="o">&lt;</span><span class="mf">0.18</span>
</pre></div>
</div>
</div>
<p>If you still experience problems, feel free to
<a class="reference external" href="https://github.com/readthedocs/readthedocs.org/issues/">open an issue</a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference external" href="https://docs.readthedocs.io/en/stable/tutorial/index.html#customizing-the-build-process" title="(in Read the Docs user documentation v6.3.2)"><span class="xref std std-ref">Read the Docs tutorial</span></a></dt><dd>An introduction to our configuration file and some basic usage examples</dd>
<dt><a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/v2.html#python-install" title="(in Read the Docs user documentation v6.3.2)"><span class="xref std std-ref">.readthedocs.yaml python.install options</span></a></dt><dd>All of the supported Python dependency installation options</dd>
<dt><a class="reference external" href="https://github.com/readthedocs/readthedocs.org/issues/8616">https://github.com/readthedocs/readthedocs.org/issues/8616</a></dt><dd>An example stack trace of this bug and discussion around resolving the
error</dd>
</dl>
</div>
</div>
</div>

  <div class="section">
  
    
  
  
  </div>

      </div>

      <div class="col-minor sidebar">
  
  
  <ul class="post-details">
    <li>
      
        <i class="fa-fw fa fa-calendar"></i>
        02 November 2021
      
    </li>

      

  
  <li id="author"><span><i class="fa-fw fa fa-user"></i></span>
    
      
      <a href="archive/author/anthony-johnson.html">Anthony Johnson</a>
      
    </li>
  

  
  <li id="location"><span><i class="fa-fw fa fa-location-arrow"></i></span>
    
      
      <a href="archive/location/spokane-washington.html">Spokane, Washington</a>
      
    </li>
  

  

  

  
  <li id="tags"><span><i class="fa-fw fa fa-tag"></i></span>
    
      
      <a href="archive/tag/builders.html">builders</a>
      
    </li>
  
  
  </ul>



<!-- Begin MailerLite Signup Form -->
  <div id="mlb2-4710274" class="ml-form-embedContainer ml-subscribe-form ml-subscribe-form-4710274">
    <div class="ml-form-align-center">
      <div class="ml-form-embedWrapper embedForm">
        <div class="ml-form-embedBody ml-form-embedBodyDefault row-form">
          <div class="ml-form-embedContent">
            <h3 style="margin-left: 0">Subscribe to our mailing list</h3>
            <p>Sign up for our blog and we'll send you news and updates about Sphinx and Read the Docs on a regular basis.</p>
          </div>
          <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/p8b7z2" data-code="p8b7z2" method="post" target="_blank">
            <div class="ml-form-formContent">
              <div class="ml-form-fieldRow ml-last-item">
                <div class="ml-field-group ml-field-email ml-validate-email ml-validate-required">
                  <input aria-label="email" aria-required="true" type="email" class="form-control" data-inputmask="" name="fields[email]" placeholder="email address" autocomplete="email" style="width: 90%">
                </div>
              </div>
            </div>
            <div class="ml-form-embedPermissions">
              <div class="ml-form-embedPermissionsContent default privacy-policy">
                <p style="margin-bottom: 0; font-size: 0.8em">You can unsubscribe anytime. For more details, review our <a href="https://docs.readthedocs.io/page/privacy-policy.html" target="_blank">Privacy Policy</a>.</p>
              </div>
            </div>
            <input type="hidden" name="ml-submit" value="1">
            <div class="ml-form-embedSubmit">
              <button type="submit" class="primary">Subscribe</button>
              <button disabled="disabled" style="display:none" type="button" class="loading"> <div class="ml-form-embedSubmitLoad"></div> <span class="sr-only">Loading...</span> </button>
            </div>
            <input type="hidden" name="anticsrf" value="true">
          </form>
        </div>
        <div class="ml-form-successBody row-success" style="display:none">
          <div class="ml-form-successContent">
            <h4>Thank you!</h4>
            <p>You have successfully joined our subscriber list.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function ml_webform_success_4710274(){var r=ml_jQuery||jQuery;r(".ml-subscribe-form-4710274 .row-success").show(),r(".ml-subscribe-form-4710274 .row-form").hide()}
  </script>
  <img src="https://track.mailerlite.com/webforms/o/4710274/p8b7z2?v1632123501" width="1" height="1" style="max-width:1px;max-height:1px;visibility:hidden;padding:0;margin:0;display:block" alt="." border="0">
  <script src="https://static.mailerlite.com/js/w/webforms.min.js?v0c75f831c56857441820dcec3163967c" type="text/javascript"></script>
<!--End mc_embed_signup-->


<!-- Jobs 
<h3> Read the Docs is hiring </h3>
<ul>
    <li><a href="https://blog.readthedocs.com/job-frontend/">Front-end Developer</a></li>
</ul>
-->

<h3> Follow us </h3>

<ul>
<li>
<a href="http://blog.readthedocs.com/archive/atom.xml" rel="me">Atom Feed</a>
</li>
<li>
<a href="https://twitter.com/readthedocs" rel="me">Twitter</a>
</li>
</ul>

  <h3><a href="archive.html">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="newsletter-december-2021.html">14 December - Read the Docs newsletter - December 2021</a></li>
    
      <li><a href="embed-api-v3.html">07 December - Announcing Embed API v3 and sphinx-hoverxref 1.0</a></li>
    
      <li><a href="jupyter-book-read-the-docs.html">11 November - Read the Docs ❤️ Jupyter Book</a></li>
    
      <li><a href="newsletter-november-2021.html">04 November - Read the Docs newsletter - November 2021</a></li>
    
      <li><a href="new-build-specification.html">14 October - Ubuntu 20.04, Python 3.10, and support for Node, Rust, and Go</a></li>
    
  </ul>

  <h3><a href="archive/archive.html">Archives</a></h3>
  <ul>
  
    
    <li><a href="archive/2021.html">2021 (23)</a></li>
    
  
    
    <li><a href="archive/2020.html">2020 (6)</a></li>
    
  
    
    <li><a href="archive/2019.html">2019 (15)</a></li>
    
  
    
    <li><a href="archive/2018.html">2018 (13)</a></li>
    
  
    
    <li><a href="archive/2017.html">2017 (7)</a></li>
    
  
    
    <li><a href="archive/2016.html">2016 (5)</a></li>
    
  
    
    <li><a href="archive/2015.html">2015 (9)</a></li>
    
  
    
    <li><a href="archive/2014.html">2014 (4)</a></li>
    
  
    
    <li><a href="archive/2013.html">2013 (2)</a></li>
    
  
  </ul>

        
      </div>
    </div>
  </div>
  <div id="footer">
    <div class="row">
      <div class="col fill">
        <ul>
            <li>
                &copy; Copyright 2021, Read the Docs, Inc.
            </li>

          <li>
            Powered by <a href="http://ablog.readthedocs.org">ABlog</a>, and <a href="http://readthedocs.org/">Read the Docs</a>.
          </li>
            <li>
              Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
            </li>
        </ul>
      </div>
    </div>
  </div>
  </body>
</html>